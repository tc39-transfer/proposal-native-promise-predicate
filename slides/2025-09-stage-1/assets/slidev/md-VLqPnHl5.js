import{_ as P}from"./VClick-s3aRM-D8.js";import{d as V,e as M}from"../modules/unplugin-icons-D-e7LJAq.js";import{d as N,f as g,i as C,o as c,n as b,r as z,O as q,E as j,L as K,z as E,aK as R,D as O,j as W,e as F,g as i,t as U,T as k,b as _,k as X,aL as G,w as v,ah as S,ad as a,m as L,v as J,x as Q}from"../modules/vue-I2LLcSIJ.js";import{o as I,ak as Y,C as Z,al as ii,am as ei}from"../index-BEX4FH-F.js";import{u as $,f as si}from"./context-CIoDo6eG.js";import{I as ti}from"./default-xjoZaAvi.js";import"../modules/shiki-DxC5pR1g.js";const li=N({__name:"TitleIcon",props:{title:{}},setup(n){const s={pnpm:"i-vscode-icons:file-type-light-pnpm",npm:"i-vscode-icons:file-type-npm",yarn:"i-vscode-icons:file-type-yarn",bun:"i-vscode-icons:file-type-bun",deno:"i-vscode-icons:file-type-deno",vue:"i-vscode-icons:file-type-vue",svelte:"i-vscode-icons:file-type-svelte",angular:"i-vscode-icons:file-type-angular",react:"i-vscode-icons:file-type-reactjs",next:"i-vscode-icons:file-type-light-next",nuxt:"i-vscode-icons:file-type-nuxt",solid:"logos:solidjs-icon",astro:"i-vscode-icons:file-type-light-astro",rollup:"i-vscode-icons:file-type-rollup",webpack:"i-vscode-icons:file-type-webpack",vite:"i-vscode-icons:file-type-vite",esbuild:"i-vscode-icons:file-type-esbuild","package.json":"i-vscode-icons:file-type-node","tsconfig.json":"i-vscode-icons:file-type-tsconfig",".npmrc":"i-vscode-icons:file-type-npm",".editorconfig":"i-vscode-icons:file-type-editorconfig",".eslintrc":"i-vscode-icons:file-type-eslint",".eslintignore":"i-vscode-icons:file-type-eslint","eslint.config":"i-vscode-icons:file-type-eslint",".gitignore":"i-vscode-icons:file-type-git",".gitattributes":"i-vscode-icons:file-type-git",".env":"i-vscode-icons:file-type-dotenv",".env.example":"i-vscode-icons:file-type-dotenv",".vscode":"i-vscode-icons:file-type-vscode","tailwind.config":"vscode-icons:file-type-tailwind","uno.config":"i-vscode-icons:file-type-unocss","unocss.config":"i-vscode-icons:file-type-unocss",".oxlintrc":"i-vscode-icons:file-type-oxlint","vue.config":"i-vscode-icons:file-type-vueconfig",".mts":"i-vscode-icons:file-type-typescript",".cts":"i-vscode-icons:file-type-typescript",".ts":"i-vscode-icons:file-type-typescript",".tsx":"i-vscode-icons:file-type-typescript",".mjs":"i-vscode-icons:file-type-js",".cjs":"i-vscode-icons:file-type-js",".json":"i-vscode-icons:file-type-json",".js":"i-vscode-icons:file-type-js",".jsx":"i-vscode-icons:file-type-js",".md":"i-vscode-icons:file-type-markdown",".py":"i-vscode-icons:file-type-python",".ico":"i-vscode-icons:file-type-favicon",".html":"i-vscode-icons:file-type-html",".css":"i-vscode-icons:file-type-css",".scss":"i-vscode-icons:file-type-scss",".yml":"i-vscode-icons:file-type-light-yaml",".yaml":"i-vscode-icons:file-type-light-yaml",".php":"i-vscode-icons:file-type-php",".svg":"i-vscode-icons:file-type-svg"};function l(t){const e=t.match(/~([^~]+)~/g);if(e&&e.length>0)return e[0].slice(1,-1);const h=Object.keys(s).sort((o,p)=>p.length-o.length);for(const o of h)if(t.toLowerCase().includes(o.toLowerCase()))return s[o];return""}return(t,e)=>l(n.title)?(c(),g("div",{key:0,class:b(`${l(n.title)} w-3.5 h-3.5 relative`)},null,2)):C("v-if",!0)}}),ni=["data-title"],oi={key:0,class:"slidev-code-block-title"},ai={class:"leading-1em"},ci=["title"],ri=N({__name:"CodeBlockWrapper",props:{ranges:{type:Array,default:()=>[]},finally:{type:[String,Number],default:"last"},startLine:{type:Number,default:1},lines:{type:Boolean,default:I.lineNumbers},at:{type:[String,Number],default:"+1"},maxHeight:{type:String,default:void 0},title:{type:String,default:void 0}},setup(n){const s=n,{$clicksContext:l}=$(),t=z(),e=Y();q(()=>{l.unregister(e)}),j(()=>{t.value?.classList.toggle("slidev-code-line-numbers",s.lines)}),K(()=>{if(!l||!s.ranges?.length)return;const r=l.calculateSince(s.at,s.ranges.length-1);l.register(e,r);const y=E(()=>r?Math.max(0,l.current-r.start+1):Z),u=E(()=>s.finally==="last"?s.ranges.at(-1):s.finally.toString());j(()=>{if(!t.value)return;let f=s.ranges[y.value]??u.value;const m=f==="hide";t.value.classList.toggle(ii,m),m&&(f=s.ranges[y.value+1]??u.value);const B=t.value.querySelector(".shiki"),A=Array.from(B.querySelectorAll("code > .line")),H=A.length;if(ei(f,H,s.startLine,d=>[A[d]]),s.maxHeight){const d=Array.from(B.querySelectorAll(".line.highlighted"));d.reduce((w,T)=>T.offsetHeight+w,0)>t.value.offsetHeight?d[0].scrollIntoView({behavior:"smooth",block:"start"}):d.length>0&&d[Math.round((d.length-1)/2)].scrollIntoView({behavior:"smooth",block:"center"})}})});const{copied:h,copy:o}=R();function p(){const r=t.value?.querySelector(".slidev-code")?.textContent;r&&o(r)}const D=O("activeTitle",null),x=E(()=>D===null&&s.title);return(r,y)=>{const u=V,f=M;return c(),g("div",{ref_key:"el",ref:t,class:b(["slidev-code-wrapper relative group",{"slidev-code-line-numbers":s.lines,active:k(D)===n.title}]),style:X({"max-height":s.maxHeight,"overflow-y":s.maxHeight?"scroll":void 0,"--start":s.startLine}),"data-title":n.title},[x.value?(c(),g("div",oi,[F(li,{title:n.title},null,8,["title"]),i("div",ai,U(n.title.replace(/~([^~]+)~/g,"").trim()),1)])):C("v-if",!0),W(r.$slots,"default"),k(I).codeCopy?(c(),g("button",{key:1,class:b(["slidev-code-copy absolute right-0 transition opacity-0 group-hover:opacity-20 hover:!opacity-100",x.value?"top-10":"top-0"]),title:k(h)?"Copied":"Copy",onClick:y[0]||(y[0]=m=>p())},[k(h)?(c(),_(u,{key:0,class:"p-2 w-8 h-8"})):(c(),_(f,{key:1,class:"p-2 w-8 h-8"}))],10,ci)):C("v-if",!0)],14,ni)}}}),vi={__name:"2025-09-stage-1.md__slidev_2",setup(n){const{$clicksContext:s,$frontmatter:l}=$();return s.setup(),(t,e)=>{const h=ri,o=P,p=G("click");return c(),_(ti,J(Q(k(si)(k(l),1))),{default:v(()=>[e[5]||(e[5]=i("h1",null,"Motivation",-1)),e[6]||(e[6]=i("p",null,[a("Native promises are recognized and don’t use "),i("code",null,".then"),a(" in some operations.")],-1)),F(o,null,{default:v(()=>[e[1]||(e[1]=i("p",null,"Native promises",-1)),F(h,L({at:1},{title:"",ranges:["hide","1-4","*","*","*","5"]}),{default:v(()=>[...e[0]||(e[0]=[i("pre",{class:"shiki shiki-themes github-dark-default github-light-default slidev-code",style:{"--shiki-dark":"#e6edf3","--shiki-light":"#1f2328","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-js"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"const"),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," promise"),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," ="),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," Promise"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"."),i("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}},"resolve"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"("),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}},"42"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},");")]),a(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"typeof"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," promise.then "),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"==="),i("span",{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"}}," 'function'"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},";")]),a(`
`),i("span",{class:"line"}),a(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"const"),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," v"),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," ="),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," await"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," promise; "),i("span",{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"}},"// does not call promise.then")]),a(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}},"Promise"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"."),i("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}},"resolve"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"(promise) "),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"==="),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," promise; "),i("span",{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"}},"// pass-through")])])],-1)])]),_:1},16)]),_:1}),S((c(),g("div",null,[e[3]||(e[3]=i("p",null,"Thenables",-1)),F(h,L({at:4},{title:"",ranges:["1-3","*","4"]}),{default:v(()=>[...e[2]||(e[2]=[i("pre",{class:"shiki shiki-themes github-dark-default github-light-default slidev-code",style:{"--shiki-dark":"#e6edf3","--shiki-light":"#1f2328","--shiki-dark-bg":"#0d1117","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-js"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"const"),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," thenable"),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," ="),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," { "),i("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}},"then"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"("),i("span",{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"}},"onFulfilled"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},") { "),i("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}},"onFulfilled"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"("),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}},"42"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},") } };")]),a(`
`),i("span",{class:"line"}),a(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"const"),i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}}," v"),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," ="),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}}," await"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," thenable; "),i("span",{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"}},"// does call thenable.then")]),a(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"}},"Promise"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"."),i("span",{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"}},"resolve"),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}},"(thenable) "),i("span",{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"}},"!=="),i("span",{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"}}," thenable; "),i("span",{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"}},"// does not pass-through, calls thenable.then, allocates new promise")])])],-1)])]),_:1},16)])),[[p,3]]),S((c(),g("div",null,[...e[4]||(e[4]=[i("p",null,"–> Cannot build a side-effect-free predicate",-1)])])),[[p,5]])]),_:1},16)}}};export{vi as default};
